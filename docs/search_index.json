[["data-cleaning.html", "Chapter 3 Data Cleaning", " Chapter 3 Data Cleaning library(tidyverse) ## ── Attaching packages ─────────────────────────────────────────────────── tidyverse 1.3.0 ── ## ✓ ggplot2 3.3.2 ✓ purrr 0.3.4 ## ✓ tibble 3.0.3 ✓ dplyr 1.0.2 ## ✓ tidyr 1.1.2 ✓ stringr 1.4.0 ## ✓ readr 1.3.1 ✓ forcats 0.5.0 ## ── Conflicts ────────────────────────────────────────────────────── tidyverse_conflicts() ── ## x dplyr::filter() masks stats::filter() ## x dplyr::lag() masks stats::lag() library(dplyr) birth &lt;- read.csv(&quot;./data/births.csv&quot;, na.strings = &quot;N/A&quot;) birth &lt;- birth %&gt;% pivot_longer(cols =1:20 ,names_to = c(&quot;Give_birth&quot;,&quot;Marriage&quot;,&quot;Education&quot;), names_sep = &quot;_&quot;, values_to = &quot;Estimate&quot;) birth$Estimate &lt;- as.integer(gsub(&quot;,&quot;, &quot;&quot;, birth$Estimate)) race &lt;- read.csv(&quot;./data/race.csv&quot;, na.strings = &quot;N/A&quot;) race&lt;- race %&gt;% pivot_longer(cols = !Gender ,names_to = c(&quot;Race&quot;,&quot;Education&quot;), names_sep = &quot;_&quot;, values_to = &quot;Estimate&quot;) race$Estimate &lt;- as.integer(gsub(&quot;,&quot;, &quot;&quot;, race$Estimate)) other_race_list = list(&quot;Native.Hawaiian.and.Other.Pacific.Islander.alone&quot;, &quot;American.Indian.or.Alaska.Native.alone&quot;, &quot;Some.other.race.alone&quot;, &quot;Two.or.more.races&quot;) race_male_highschool &lt;- race %&gt;% filter(Gender == &quot;Male&quot;) %&gt;% filter(Education == &quot;High.school.graduate.or.higher&quot;) %&gt;% filter(Race %in% other_race_list) %&gt;% summarise(Estimate = sum(Estimate)) race_male_highschool &lt;- race_male_highschool$Estimate race_female_highschool &lt;- race %&gt;% filter(Gender == &quot;Female&quot;) %&gt;% filter(Education == &quot;High.school.graduate.or.higher&quot;) %&gt;% filter(Race %in% other_race_list) %&gt;% summarise(Estimate = sum(Estimate)) race_female_highschool &lt;- race_female_highschool$Estimate race_male_bachelor &lt;- race %&gt;% filter(Gender == &quot;Male&quot;) %&gt;% filter(Education == &quot;Bachelor.s.degree.or.higher&quot;) %&gt;% filter(Race %in% other_race_list) %&gt;% summarise(Estimate = sum(Estimate)) race_male_bachelor &lt;- race_male_bachelor$Estimate race_female_bachelor &lt;- race %&gt;% filter(Gender == &quot;Female&quot;) %&gt;% filter(Education == &quot;Bachelor.s.degree.or.higher&quot;) %&gt;% filter(Race %in% other_race_list) %&gt;% summarise(Estimate = sum(Estimate)) race_female_bachelor &lt;- race_female_bachelor$Estimate race &lt;- race %&gt;% add_row(Gender = &quot;Male&quot;, Education = &quot;High.school.graduate.or.higher&quot;, Race = &quot;Other.race&quot;, Estimate = race_male_highschool) %&gt;% add_row(Gender = &quot;Female&quot;, Education = &quot;High.school.graduate.or.higher&quot;, Race = &quot;Other.race&quot;, Estimate = race_female_highschool) %&gt;% add_row(Gender = &quot;Male&quot;, Education = &quot;Bachelor.s.degree.or.higher&quot;, Race = &quot;Other.race&quot;, Estimate = race_male_bachelor) %&gt;% add_row(Gender = &quot;Female&quot;, Education = &quot;Bachelor.s.degree.or.higher&quot;, Race = &quot;Other.race&quot;, Estimate = race_female_bachelor) race &lt;- race[!race$Race %in% other_race_list, ] education &lt;- read.csv(&quot;./data/2015-2019Education.csv&quot;, na.strings = &quot;N/A&quot;) education&lt;-education %&gt;% pivot_longer(cols = !Gender ,names_to = c(&quot;Year&quot;,&quot;Education&quot;), names_sep = &quot;_&quot;, values_to = &quot;Estimate&quot;) education$Estimate &lt;- as.integer(gsub(&quot;,&quot;,&quot;&quot;,education$Estimate)) earning &lt;- read.csv(&quot;./data/2015-2019earnings.csv&quot;, na.strings = &quot;N/A&quot;) earning&lt;-earning %&gt;% pivot_longer(cols = !Gender ,names_to = c(&quot;Year&quot;,&quot;Education&quot;), names_sep = &quot;_&quot;, values_to = &quot;Earning&quot;) earning$Earning &lt;- as.integer(gsub(&quot;,&quot;,&quot;&quot;,earning$Earning)) "]]
