<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Interactive component | Education Attainment in the US</title>
  <meta name="description" content="Chapter 6 Interactive component | Education Attainment in the US" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Interactive component | Education Attainment in the US" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Interactive component | Education Attainment in the US" />
  
  
  

<meta name="author" content="Yifei Chen and Zujun Peng" />


<meta name="date" content="2020-12-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="results.html"/>
<link rel="next" href="conclustion.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Education Attainment</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data Sources</a></li>
<li class="chapter" data-level="3" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>3</b> Data Cleaning</a></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclustion.html"><a href="conclustion.html"><i class="fa fa-check"></i><b>7</b> Conclustion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Education Attainment in the US</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="interactive-component" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Interactive component</h1>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="interactive-component.html#cb34-1"></a>new &lt;-education <span class="op">%&gt;%</span><span class="kw">group_by</span>(Year, Education) <span class="op">%&gt;%</span></span>
<span id="cb34-2"><a href="interactive-component.html#cb34-2"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Estimate =</span> <span class="kw">sum</span>(Estimate)) <span class="op">%&gt;%</span></span>
<span id="cb34-3"><a href="interactive-component.html#cb34-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop =</span> Estimate<span class="op">/</span><span class="kw">sum</span>(Estimate))<span class="op">%&gt;%</span></span>
<span id="cb34-4"><a href="interactive-component.html#cb34-4"></a><span class="st">  </span><span class="kw">ungroup</span>()</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;Year&#39; (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="interactive-component.html#cb36-1"></a>edu2015 &lt;-<span class="st"> </span>new<span class="op">$</span>prop[new<span class="op">$</span>Year<span class="op">==</span><span class="dv">2015</span>]</span>
<span id="cb36-2"><a href="interactive-component.html#cb36-2"></a>edu2016 &lt;-<span class="st"> </span>new<span class="op">$</span>prop[new<span class="op">$</span>Year<span class="op">==</span><span class="dv">2016</span>]</span>
<span id="cb36-3"><a href="interactive-component.html#cb36-3"></a>edu2017 &lt;-<span class="st"> </span>new<span class="op">$</span>prop[new<span class="op">$</span>Year<span class="op">==</span><span class="dv">2017</span>]</span>
<span id="cb36-4"><a href="interactive-component.html#cb36-4"></a>edu2018 &lt;-<span class="st"> </span>new<span class="op">$</span>prop[new<span class="op">$</span>Year<span class="op">==</span><span class="dv">2018</span>]</span>
<span id="cb36-5"><a href="interactive-component.html#cb36-5"></a>edu2019 &lt;-<span class="st"> </span>new<span class="op">$</span>prop[new<span class="op">$</span>Year<span class="op">==</span><span class="dv">2019</span>]</span>
<span id="cb36-6"><a href="interactive-component.html#cb36-6"></a>eduD3 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">cbind</span>(edu2015,edu2016,edu2017,edu2018,edu2019))</span>
<span id="cb36-7"><a href="interactive-component.html#cb36-7"></a><span class="co">#write.csv(eduD3,&quot;./data/eduD3.csv&quot;)</span></span>
<span id="cb36-8"><a href="interactive-component.html#cb36-8"></a><span class="kw">attach</span>(eduD3)</span></code></pre></div>
<pre><code>## The following objects are masked _by_ .GlobalEnv:
## 
##     edu2015, edu2016, edu2017, edu2018, edu2019</code></pre>
<script src="https://d3js.org/d3.v6.js"></script>
<p><!-- link to D3 library --></p>
<p><input type="checkbox" id="lessHS" value="lessHS">
<label for="vehicle1"> Less than High School</label><br>
<input type="checkbox" id="HS" value="HS">
<label for="vehicle2"> High School Graduate</label><br>
<input type="checkbox" id ="associate" value="associate">
<label for="vehicle3"> Some College or Associate Degree </label><br>
<input type="checkbox" id="bachelor" value="bachelor">
<label for="vehicle3"> Bachelorâ€™s Degree</label><br>
<input type="checkbox" id="advanced" value="advanced">
<label for="vehicle3"> Graduate or Professional Degree</label><br></p>
<div id="plot">

</div>
<script>
  var w = 750;
  var h = 550;
  var margin = {top: 25, right: 250, bottom: 25,left: 30};
  var innerWidth = w - margin.left - margin.right;
  var innerHeight = h - margin.top - margin.bottom;
  var lessHS = [[0.1285585,2015], [0.1254705,2016], [0.1201455,2017], [0.1167068,2018], [0.1139115,2019]];
  var HS = [[0.2756469,2015], [0.2717640,2016], [0.2713289,2017], [0.2686960,2018], [0.2689317,2019]];
  var associate = [[0.2897543,2015], [0.2899876,2016], [0.2886797,2017], [0.2885941,2018], [0.2858890,2019]];
  var bachelor = [[0.1901267,2015], [0.1933507,2016], [0.1969944,2017], [0.1998540,2018], [0.2033382,2019]];
  var advanced = [[0.1159136,2015], [0.1194270,2016], [0.1228514,2017], [0.1261490,2018], [0.1279295,2019]];
  
  var xScale = d3.scaleBand()
      .domain(d3.range(2015,2020))
      .range([0, innerWidth]);
      
  var yScale = d3.scaleLinear()
      .domain([0.1, 0.3])
      .range([innerHeight, 0])

  var xAxis = d3.axisBottom()
      .scale(xScale);

  var yAxis = d3.axisLeft()
      .scale(yScale);
  var svg =d3.select("div#plot")
      .append("svg")
      .attr("width",w)
      .attr("height",h);
      
  var mylinegen = d3.line()
  
  mylinegen
    .x(d => xScale(d[1])+50)
    .y(d => yScale(d[0]));
 
  svg.append("g")
      .attr("class", "xAxis")
      .attr("transform", `translate (${margin.left}, ${h - margin.bottom})`)
      .call(xAxis);

  svg.append("g")
      .attr("class", "yAxis")
      .attr("transform", `translate (${margin.left}, ${margin.top})`)
      .call(yAxis);
      
    d3.select("#lessHS").on("change",update1);
    d3.select("#HS").on("change",update2);
    d3.select("#associate").on("change",update3);
    d3.select("#bachelor").on("change",update4);
    d3.select("#advanced").on("change",update5);
  
  function drawline(data,ID,color,svg_){
    var mypath = mylinegen(data);
    svg_.append("g")
                .attr("id",ID)
        .attr("transform", `translate (${margin.left}, ${margin.top})`)
        .append("path")
        .attr("d", mypath)
        .attr("fill", "none").attr("stroke", color)
        .attr("stroke-width", "3");
  }
  
  function add_legend(text, color,y,ID){
    svg.append("g")
        .attr("id", ID)
        .append("rect")
        .attr("x","500")
        .attr("y",y)
        .attr("width","20")
        .attr("height","20")
        .attr("fill", color);
    svg.append("text")
        .attr("id",ID)
        .attr("x","525")
        .attr("y", y+20)
        .text(text);
  }
    function update1(){
          if(d3.select("input#lessHS").property("checked")){
            drawline(lessHS,"lesshs","#c7f3ff",svg);
            add_legend("Less Than High School","#c7f3ff",25,"legend1");
          }else{
            svg.select("#lesshs").remove();
            svg.select("#legend1").remove();
            svg.select("text#legend1").remove();
          }
    };
    
    function update2(){
      if(d3.select("input#HS").property("checked")){
            drawline(HS,"hs","#b3cde3",svg);
            add_legend("High School Graduate","#b3cde3",50,"legend2");
        }else{
            svg.select("#hs").remove();
            svg.select("#legend2").remove();
            svg.select("text#legend2").remove();
        }
    };
    function update3(){
      if(d3.select("input#associate").property("checked")){
            drawline(associate,"associated","#8c96c6",svg);
            add_legend("Some College Degree","#8c96c6",75,"legend3");

        }else{
        svg.select("#associated").remove();
            svg.select("#legend3").remove();
            svg.select("text#legend3").remove();
        }
    };
    function update4(){
      if(d3.select("input#bachelor").property("checked")){
            drawline(bachelor,"bachelors","#9b6cb9",svg);
            add_legend("Bachelor's Degree","#9b6cb9",100,"legend4");

        }else{
        svg.select("#bachelors").remove();
            svg.select("#legend4").remove();
            svg.select("text#legend4").remove();
        }
    };
    function update5(){
      if(d3.select("input#advanced").property("checked")){
            drawline(advanced,"advance","#810f7c",svg);
            add_legend("Graduate/Professional Degree","#810f7c",125,"legend5");

        }else{
        svg.select("#advance").remove();
        svg.select("#legend5").remove();
            svg.select("text#legend5").remove();
        
        }
    };

</script>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="results.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclustion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ZujunPeng/Education_attainment/edit/master/06-interactive.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ZujunPeng/Education_attainment/blob/master/06-interactive.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
